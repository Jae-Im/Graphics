<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8>
	<title>My first three.js app</title>
	<style>
		body {
			margin: 0;
		}

		canvas {
			width: 100%;
			height: 100%
		}
	</style>
</head>

<body>

	<!-- Three js -->
	<script src="https://threejs.org/build/three.js"></script>

	<!-- WebGL 지원유무 https://github.com/mrdoob/three.js/blob/master/examples/js/WebGL.js 참고 -->
	<script src="./WebGL.js"></script>

	<!-- OrbitControls.js allow the camera to orbit around a target 마우스와 카메라를 상호작용하게 합니다. -->
	<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>

	<!-- OBJ Loader를 사용하기 위해 추가. https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js 와 동일 소스  -->
	<script src="./objloader.js"></script>

	<script>
		window.onload = function (e) {

			let scene = new THREE.Scene();
			let light;
			let camera;
			let loader; // OBJLoader 객체를 넣을 변수를 선언합니다.
			var object1;
			var object2;
			var object3;
			var object4;


			loader = new THREE.OBJLoader;
			initThree();
			addDirectionalLight();
			// loadObjLoader();

			/**
			 * DirectionalLight를 추가하는 함수
			 *
			 * @method addDirectionalLight
			 */
			function addDirectionalLight() {

				light = new THREE.DirectionalLight(0xffffff, 1);
				light.castShadow = true;
				light.position.x = 5;
				light.position.y = 5;
				light.position.z = 5;

				var light1 = new THREE.DirectionalLight(0xffffff, 1);
				scene.add(light);
				// scene.add(light1);
			}

			/**
			 * .obj 파일의 모델을 로드하는 함수
			 *
			 * @method loadObjLoader
			 */
			function loadObjLoader() {
				loader = new THREE.OBJLoader();

				loader.load('./octopus.obj', function (object) {
					// 모델 로드가 완료되었을때 호출되는 함수
					object.position.y = 1;
					object.position.x = 1;
					object.position.z = 1;
					scene.add(object);
				}, function (xhr) {
					// 모델이 로드되는 동안 호출되는 함수
					console.log(xhr.loaded / xhr.total * 100, '% loaded');
				}, function (error) {
					// 모델 로드가 실패했을 때 호출하는 함수
					alert('모델을 로드 중 오류가 발생하였습니다.');
				});

				loader.load('./shark.obj', function (object) {
					// 모델 로드가 완료되었을때 호출되는 함수
					object.position.y = 4;
					object.position.x = 4;
					object.position.z = 4;
					object.rotation.y = 90;
					scene.add(object);
				}, function (xhr) {
					// 모델이 로드되는 동안 호출되는 함수
					console.log(xhr.loaded / xhr.total * 100, '% loaded');
				}, function (error) {
					// 모델 로드가 실패했을 때 호출하는 함수
					alert('모델을 로드 중 오류가 발생하였습니다.');
				});

				loader.load('./tuna.obj', function (object) {
					// 모델 로드가 완료되었을때 호출되는 함수
					object.position.y = 4;
					object.position.x = 2;
					object.position.z = 1;
					object.rotation.y = -90;
					scene.add(object);
				}, function (xhr) {
					// 모델이 로드되는 동안 호출되는 함수
					console.log(xhr.loaded / xhr.total * 100, '% loaded');
				}, function (error) {
					// 모델 로드가 실패했을 때 호출하는 함수
					alert('모델을 로드 중 오류가 발생하였습니다.');
				});

				loader.load('./salmon.obj', function (object) {
					// 모델 로드가 완료되었을때 호출되는 함수
					object.position.y = 3;
					object.position.x = 5;
					object.position.z = 2;
					object.scale.x = 3;
					object.scale.y = 3;
					object.scale.z = 3;
					scene.add(object);
				}, function (xhr) {
					// 모델이 로드되는 동안 호출되는 함수
					console.log(xhr.loaded / xhr.total * 100, '% loaded');
				}, function (error) {
					// 모델 로드가 실패했을 때 호출하는 함수
					alert('모델을 로드 중 오류가 발생하였습니다.');
				});

				loader.load('./spongebob.obj', function (object) {
					// 모델 로드가 완료되었을때 호출되는 함수

					object.position.x = 3;
					object.position.z = 2;
					object.scale.x = 10;
					object.scale.y = 10;
					object.scale.z = 10;
					scene.add(object);

					document.getElementById("Button1").onclick = function () {
						animation(object);
					};
					document.getElementById("Button2").onclick = function () {
						animation1(object);
					};
				}, function (xhr) {
					// 모델이 로드되는 동안 호출되는 함수
					console.log(xhr.loaded / xhr.total * 100, '% loaded');
				}, function (error) {
					// 모델 로드가 실패했을 때 호출하는 함수
					alert('모델을 로드 중 오류가 발생하였습니다.');
				});
			}


			/**
			 * Threejs 초기화 함수
			 *
			 * @method initThree
			 */
			function initThree() {

				function wlfkf(){
					tlqkf(1);

				}

				function tlqkf(slal) {
					loader.load('./bionano.obj', function (object) {
						// 모델 로드가 완료되었을때 호출되는 함수

						object.position.x = slal;
						object.position.z = 2;
						object.scale.x = 0.3;
						object.scale.y = 0.3;
						object.scale.z = 0.3;
						object1 = object;

						scene.add(object1);
						animate();
					});
					// loader.load('./shark.obj', function (object) {
					// 	// 모델 로드가 완료되었을때 호출되는 함수
					//
					// 	object.position.x = slal;
					// 	object.position.z = 2;
					// 	object.position.y = 5;
					// 	object.scale.x = 3;
					// 	object.scale.y = 3;
					// 	object.scale.z = 3;
					// 	object2 = object;
					//
					// 	scene.add(object2);
					//
					// 	animate();
					// });

				}


				// 브라우저가 WebGL을 지원하는지 체크
				if (WEBGL.isWebGLAvailable()) {
					console.log('이 브라우저는 WEBGL을 지원합니다.');
				} else {
					console.log('이 브라우저는 WEBGL을 지원하지 않습니다.');
				}

				camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

				let renderer = new THREE.WebGLRenderer({
					antialias: true
				});
				renderer.setSize(window.innerWidth, window.innerHeight);
				renderer.setClearColor(0xffffff, 1);
				renderer.shadowMap.enabled = true;
				renderer.shadowMap.type = THREE.PCFSoftShadowMap;
				document.body.appendChild(renderer.domElement);


				wlfkf();

				let axes = new THREE.AxesHelper(10);
				scene.add(axes);

				camera.position.x = 20;
				camera.position.y = 20;
				camera.position.z = 20;

				let controls = new THREE.OrbitControls(camera, renderer.domElement);
				controls.rotateSpeed = 1.0;
				controls.zoomSpeed = 1.2;
				controls.panSpeed = 0.8;
				controls.minDistance = 5;
				controls.maxDistance = 100;
				// controls.autoRotate = true;

				controls.update();
				function animate() {

					requestAnimationFrame(animate);

					renderer.render(scene, camera);
					controls.update();
				}

			}
		}
	</script>
</body>

</html>